const link=document.querySelector(".footer-button"),popup=document.querySelector(".popup"),popupClose=document.querySelector(".button-popup-close"),form=popup.querySelector("form"),popupName=popup.querySelector('[name="name"]'),popupEmail=popup.querySelector('[name="email"]'),popupText=popup.querySelector('[name="text"]');let isStorageSupport=!0;const storage="";try{storage=localStorage.getItem("popupName")}catch(p){isStorageSupport=!1}link.addEventListener("click",function(p){p.preventDefault(),popup.classList.add("popup-show"),storage?(popupName.value=storage,popupEmail.focus()):popupName.focus()}),popupClose.addEventListener("click",function(p){p.preventDefault(),popup.classList.remove("popup-show"),popup.classList.remove("popup-error")}),document.addEventListener("keydown",function(p){27===p.keyCode&&(popup.classList.remove("popup-show"),popup.classList.remove("popup-error"))}),form.addEventListener("submit",function(p){popupName.value&&popupEmail.value&&popupText.value?isStorageSupport&&localStorage.setItem("popupName",popupName.value):(p.preventDefault(),popup.classList.remove("popup-error"),popup.offsetWidth=popup.offsetWidth,popup.classList.add("popup-error"))});